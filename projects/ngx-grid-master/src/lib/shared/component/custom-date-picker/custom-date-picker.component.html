<div class="datepicker-wrapper" #wrapper>
  <input [value]="defaultSelectedValue()" (click)="toggleDatePicker()" (keydown)="handleKeydown($event)" readonly />

  <div class="icon" (click)="toggleDatePicker()">ðŸ“…</div>

  <div *ngIf="isDatePickerOpen" class="datepicker" [ngClass]="{'append-to-body': appendToBody}">
    <div class="header">
      <span class="prev" (click)="navigateMonth(-1)">&#10094;</span>
      <span (click)="toggleMonthList()">{{ currentMonthName }}</span>
      <span (click)="toggleYearList()">{{ currentYear }}</span>
      <span class="next" (click)="navigateMonth(1)">&#10095;</span>
    </div>

    <div *ngIf="showMonthList" class="month-list">
      <div *ngFor="let month of months" (click)="selectMonth(month)">
        {{ month }}
      </div>
    </div>

    <div *ngIf="showYearList" class="year-list">
      <div *ngFor="let year of years" (click)="selectYear(year)">
        {{ year }}
      </div>
    </div>

    <table *ngIf="!showMonthList && !showYearList">
      <thead>
        <tr>
          <th *ngFor="let day of weekDays">{{ day }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let week of monthDays">
          <td *ngFor="let day of week" [class.selected]="day && isSelectedDate(day)" [class.today]="isToday(day)"
            (click)="selectDate(day)">
            {{ day?.date }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
